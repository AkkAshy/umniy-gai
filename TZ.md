# Техническое задание: ГАИ Нөкис

## 1. Общее описание

**Название проекта:** ГАИ Нөкис (GAI Nokis)
**Тип:** Веб-приложение (админ-панель)
**Назначение:** Система управления дорожным движением и фиксации нарушений для ГИБДД города Нукус

### 1.1 Связь с проектом "Умный город"

Проект "ГАИ Нөкис" работает в связке с "Ақыллы Нөкис" (Умный город) через API:

| Направление | Данные | Описание |
|-------------|--------|----------|
| **ГАИ → Умный город** | Штрафы | Все штрафы создаются в ГАИ и отправляются в Умный город |
| **ГАИ → Умный город** | Нарушения | Данные о нарушениях ПДД |
| **ГАИ → Умный город** | Штрафстоянка | Информация об эвакуированных ТС |
| **ГАИ → Умный город** | Парковки | Данные о парковочных сессиях и нарушениях |
| **ГАИ → Умный город** | Камеры | Статистика с камер фиксации |
| **Умный город → ГАИ** | Приказы | Распоряжения от хокимията (перекрытие улиц, мероприятия) |
| **Умный город → ГАИ** | События | Уведомления о праздниках, ремонтах, ЧС |

## 2. Технический стек

- **Next.js 14** — App Router
- **TypeScript** — типизация
- **Tailwind CSS** — стилизация
- **shadcn/ui** — UI компоненты
- **Recharts** — графики и диаграммы
- **Framer Motion** — анимации
- **Lucide React** — иконки
- **next-themes** — переключение тем
- **Sonner** — toast уведомления
- **date-fns** — работа с датами

## 3. Модули системы

### 3.1 Дашборд (`/dashboard`)
Главная страница со сводной информацией:
- Статистика за день/неделю/месяц
- Количество выписанных штрафов
- Сумма собранных штрафов
- Активные камеры
- ТС на штрафстоянке
- Графики динамики нарушений
- Входящие приказы от хокимията

### 3.2 Штрафы (`/fines`)
Основной модуль — создание и управление штрафами:
- **Создание штрафа:**
  - Госномер ТС
  - Тип нарушения (превышение скорости, проезд на красный, неправильная парковка и т.д.)
  - Место нарушения (адрес, координаты)
  - Дата и время
  - Сумма штрафа
  - Фото/видео фиксация
  - Камера или инспектор
- **Статусы штрафа:**
  - Новый
  - Отправлен в Умный город
  - Ожидает оплаты
  - Оплачен
  - Обжалован
  - Аннулирован
- **Действия:**
  - Отправить в Умный город
  - Редактировать
  - Аннулировать (с причиной)
  - Печать постановления

### 3.3 Камеры фиксации (`/cameras`)
Управление камерами видеофиксации:
- Список всех камер на карте
- Статус камеры (активна, на обслуживании, неисправна)
- Статистика по каждой камере
- Последние зафиксированные нарушения
- Настройка порогов скорости
- Журнал событий камеры

### 3.4 Штрафстоянка (`/impound`)
Учёт эвакуированных транспортных средств:
- Регистрация эвакуации:
  - Госномер
  - Марка/модель
  - Причина эвакуации
  - Место эвакуации
  - Фото ТС
  - Эвакуатор/водитель
- Статусы:
  - На стоянке
  - Ожидает оплаты
  - Готов к выдаче
  - Выдан
- Калькулятор стоимости хранения
- Оформление выдачи
- Синхронизация с Умным городом

### 3.5 Парковки (`/parking`)
Контроль парковочного пространства:
- Зоны платной парковки
- Активные сессии
- Нарушения парковки
- Штрафы за неоплату
- Статистика загруженности

### 3.6 Приказы от хокимията (`/orders`)
Входящие распоряжения от Умного города:
- Список приказов:
  - Перекрытие улиц для праздников
  - Ограничение движения при ремонте
  - Особый режим при ЧС
  - Сопровождение мероприятий
- Статусы:
  - Новый
  - Принят к исполнению
  - Выполняется
  - Выполнен
  - Отменён
- История выполнения
- Отчёты об исполнении

### 3.7 Перекрытия улиц (`/closures`)
Управление временным перекрытием:
- Активные перекрытия на карте
- Создание перекрытия:
  - Улица/участок
  - Причина
  - Время начала/окончания
  - Альтернативные маршруты
- Уведомление водителей
- История перекрытий

### 3.8 Патрули (`/patrols`)
Управление патрульными экипажами:
- Список экипажей
- Текущее местоположение на карте
- Статус (на маршруте, на вызове, свободен)
- Назначение задач
- История дежурств

### 3.9 Отчёты (`/reports`)
Формирование отчётности:
- Ежедневный отчёт
- Недельный/месячный отчёт
- Отчёт по типам нарушений
- Отчёт по камерам
- Финансовый отчёт (штрафы)
- Экспорт в PDF/Excel

### 3.10 Настройки (`/settings`)
Конфигурация системы:
- Справочник нарушений и тарифов
- Управление камерами
- Настройки интеграции с Умным городом
- Пользователи и роли
- Журнал аудита

## 4. API интеграция

### 4.1 Исходящие данные (ГАИ → Умный город)

```typescript
// POST /api/smart-city/fines
interface FinePayload {
  id: string
  plateNumber: string
  violationType: string
  amount: number
  location: {
    address: string
    coordinates: [number, number]
  }
  datetime: string
  cameraId?: string
  inspectorId?: string
  photos: string[]
  status: 'pending' | 'paid' | 'cancelled'
}

// POST /api/smart-city/impound
interface ImpoundPayload {
  id: string
  plateNumber: string
  vehicleMake: string
  vehicleModel: string
  reason: string
  location: string
  datetime: string
  status: 'impounded' | 'ready' | 'released'
  dailyRate: number
}

// POST /api/smart-city/parking-violations
interface ParkingViolationPayload {
  id: string
  plateNumber: string
  zone: string
  datetime: string
  fineAmount: number
}
```

### 4.2 Входящие данные (Умный город → ГАИ)

```typescript
// Webhook: /api/webhooks/orders
interface OrderPayload {
  id: string
  type: 'street_closure' | 'traffic_restriction' | 'escort' | 'emergency'
  title: string
  description: string
  streets: string[]
  startTime: string
  endTime: string
  priority: 'low' | 'medium' | 'high' | 'urgent'
  createdBy: string
}
```

## 5. Роли пользователей

| Роль | Права |
|------|-------|
| **Администратор** | Полный доступ, настройки системы |
| **Начальник отдела** | Просмотр всего, утверждение, отчёты |
| **Инспектор** | Создание штрафов, эвакуация |
| **Оператор камер** | Просмотр камер, подтверждение нарушений |
| **Диспетчер** | Управление патрулями, приказы |

## 6. Дизайн

### 6.1 Цветовая схема
- **Основной цвет:** Синий (#1e40af) — официальный, государственный
- **Акцент:** Жёлтый (#f59e0b) — внимание, предупреждения
- **Успех:** Зелёный (#22c55e)
- **Ошибка:** Красный (#ef4444)
- **Нейтральный:** Серый (#6b7280)

### 6.2 Темы
- Светлая тема (по умолчанию)
- Тёмная тема
- Серая тема

### 6.3 Языки
- Русский (основной)
- Узбекский
- Каракалпакский

## 7. Структура проекта

```
gai-nokis/
├── src/
│   ├── app/
│   │   ├── layout.tsx
│   │   ├── page.tsx
│   │   ├── dashboard/
│   │   ├── fines/
│   │   ├── cameras/
│   │   ├── impound/
│   │   ├── parking/
│   │   ├── orders/
│   │   ├── closures/
│   │   ├── patrols/
│   │   ├── reports/
│   │   └── settings/
│   ├── components/
│   │   ├── layout/
│   │   │   ├── sidebar.tsx
│   │   │   ├── header.tsx
│   │   │   └── main-layout.tsx
│   │   ├── ui/ (shadcn)
│   │   ├── fines/
│   │   ├── cameras/
│   │   └── maps/
│   ├── lib/
│   │   ├── utils.ts
│   │   ├── mock-data.ts
│   │   ├── api.ts
│   │   └── i18n/
│   └── types/
│       └── index.ts
├── public/
├── CLAUDE.md
└── package.json
```

## 8. Этапы разработки

### Этап 1: Базовая настройка
- [x] Инициализация Next.js проекта
- [ ] Настройка Tailwind CSS и shadcn/ui
- [ ] Создание layout и навигации
- [ ] Настройка тем и локализации

### Этап 2: Основные модули
- [ ] Дашборд
- [ ] Модуль штрафов
- [ ] Камеры фиксации
- [ ] Штрафстоянка

### Этап 3: Дополнительные модули
- [ ] Парковки
- [ ] Приказы от хокимията
- [ ] Перекрытия улиц
- [ ] Патрули

### Этап 4: Интеграция
- [ ] API для связи с Умным городом
- [ ] Webhook для приёма приказов
- [ ] Синхронизация данных

### Этап 5: Отчётность
- [ ] Генерация отчётов
- [ ] Экспорт данных
- [ ] Аналитика

## 9. Примечания

1. Проект запускается на порту 3001 (Умный город на 3000)
2. Данные штрафов и нарушений создаются ТОЛЬКО в ГАИ системе
3. Умный город получает данные через API для отображения статистики
4. Приказы от хокимията являются обязательными к исполнению
5. Все действия логируются в журнал аудита

---

**Автор:** iMax IT Company
**Дата:** Декабрь 2025
